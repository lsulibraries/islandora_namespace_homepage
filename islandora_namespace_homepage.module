<?php

/**
 * Implements hook_menu.
 */
function islandora_namespace_homepage_menu() {
    $items['institutions/%'] = array(
      'page callback' => 'namespace_homepage_page',
      'page arguments' => array(1),
      'access callback' => TRUE,
      'type' => MENU_NORMAL_ITEM,
    );
    return $items;
}

function namespace_homepage_page($namespace) {
  return theme('test_my_stuff', array('namespace' => $namespace));
}

/**
 * Implements hook_node_info()
 */
//function islandora_namespace_homepage_node_info() {
//  return array(
//    'islandora_namespace_homepage' => array(
//      'name' => t('Namespace Homepage'),
//      'base' => 'islandora_namespace_homepage',
//      'description' => t('Public landing page for islandora namespace prefixes.'),
//      'has_title' => TRUE,
//      'title_label' => t('Namespace Owner'),
//      'comment' => COMMENT_NODE_CLOSED,
//    )
//  );
//}

/**
 * Implement hook_form()
 */
//function islandora_namespace_homepage_form($node, $form_state) {
//  return node_content_form($node, $form_state);
//}

/**
 * Implements hook_theme().
 * 
 * thx to https://www.drupal.org/docs/7/creating-custom-modules/howtos/using-template-tplphp-files-in-your-own-module
 */
function islandora_namespace_homepage_theme($existing, $type, $theme, $path) {

//  $theme['islandora_namespace_homepage'] = array(
//    'file' => 'theme/theme.inc',
//    'template' => 'theme/islandora-namespace-homepage',
//    'pattern' => 'islandora_namespace_homepage__',
//    'variables' => array('islandora_ns_home' => NULL),
//  );
  return array(
    'test_my_stuff' => array(
      'variables' => array('namespace' => 'all'),
    ),
  );
}

function theme_test_my_stuff($variables) {
  return 'hello ' . $variables['namespace'];
}

function islandora_namespace_homepage_node_view($node, $view_mode, $langcode) {
  if($node->type == 'islandora_namespace_homepage') {
    $variables['islandora_ns_home']['hello'] = "yo bruh";
  }
}